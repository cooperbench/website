<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Primary Meta Tags -->
        <meta
            name="title"
            content="The Curse of Coordination: Why Agents Cannot be Your Teammates Yet"
        />
        <meta
            name="description"
            content="We present CooperBench, the first benchmark designed to measure how well AI agents can cooperate when handling individual tasks with potential conflicts in software engineering."
        />
        <meta
            name="keywords"
            content="multi-agent systems, AI coordination, coding agents, software engineering, agent cooperation, merge conflicts, LLM agents"
        />
        <meta
            name="author"
            content="Arpandeep Khatua, Hao Zhu, Peter Tran, Arya Prabhudesai, Frederic Sadrieh, Johann K. Lieberwirth, Xinkai Yu, Yicheng Fu, Michael J. Ryan, Jiaxin Pei, Diyi Yang"
        />
        <meta name="robots" content="index, follow" />
        <meta name="language" content="English" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="article" />
        <meta property="og:site_name" content="Stanford University" />
        <meta
            property="og:title"
            content="The Curse of Coordination: Why Agents Cannot be Your Teammates Yet"
        />
        <meta
            property="og:description"
            content="We present CooperBench, the first benchmark designed to measure how well AI agents can cooperate when handling individual tasks with potential conflicts in software engineering."
        />
        <meta
            property="og:url"
            content="https://cotomata.com/"
        />
        <meta
            property="og:image"
            content="https://cotomata.com/static/images/social_preview.png"
        />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta
            property="og:image:alt"
            content="CooperBench - The Curse of Coordination Research Preview"
        />
        <meta
            property="article:published_time"
            content="2025-01-01T00:00:00.000Z"
        />
        <meta property="article:author" content="Arpandeep Khatua" />
        <meta property="article:section" content="Research" />
        <meta property="article:tag" content="multi-agent systems" />
        <meta property="article:tag" content="AI coordination" />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@StanfordNLP" />
        <meta name="twitter:creator" content="@StanfordNLP" />
        <meta
            name="twitter:title"
            content="The Curse of Coordination: Why Agents Cannot be Your Teammates Yet"
        />
        <meta
            name="twitter:description"
            content="We present CooperBench, the first benchmark designed to measure how well AI agents can cooperate when handling individual tasks with potential conflicts in software engineering."
        />
        <meta
            name="twitter:image"
            content="https://cotomata.com/static/images/social_preview.png"
        />
        <meta
            name="twitter:image:alt"
            content="CooperBench - The Curse of Coordination Research Preview"
        />

        <!-- Academic/Research Specific -->
        <meta
            name="citation_title"
            content="The Curse of Coordination: Why Agents Cannot be Your Teammates Yet"
        />
        <meta name="citation_author" content="Khatua, Arpandeep" />
        <meta name="citation_author" content="Zhu, Hao" />
        <meta name="citation_author" content="Tran, Peter" />
        <meta name="citation_author" content="Prabhudesai, Arya" />
        <meta name="citation_author" content="Sadrieh, Frederic" />
        <meta name="citation_author" content="Lieberwirth, Johann K." />
        <meta name="citation_author" content="Yu, Xinkai" />
        <meta name="citation_author" content="Fu, Yicheng" />
        <meta name="citation_author" content="Ryan, Michael J." />
        <meta name="citation_author" content="Pei, Jiaxin" />
        <meta name="citation_author" content="Yang, Diyi" />
        <meta name="citation_publication_date" content="2025" />
        <meta
            name="citation_pdf_url"
            content="https://cotomata.com/static/pdfs/paper.pdf"
        />

        <!-- Additional SEO -->
        <meta name="theme-color" content="#2563eb" />
        <meta name="msapplication-TileColor" content="#2563eb" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />

        <!-- Preconnect for performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preconnect" href="https://ajax.googleapis.com" />
        <link rel="preconnect" href="https://documentcloud.adobe.com" />
        <link rel="preconnect" href="https://cdn.jsdelivr.net" />

        <title>The Curse of Coordination: Why Agents Cannot be Your Teammates Yet</title>

        <!-- Favicon and App Icons -->
        <link rel="icon" type="image/x-icon" href="static/images/favicon.ico" />
        <link rel="apple-touch-icon" href="static/images/favicon.ico" />

        <!-- Tailwind CSS -->
        <script src="https://cdn.tailwindcss.com"></script>

        <!-- Font Awesome -->
        <link rel="stylesheet" href="static/css/fontawesome.all.min.css" />

        <!-- Academic Icons -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css"
        />

        <!-- Custom Tailwind Styles -->
        <link rel="stylesheet" href="static/css/tailwind-custom.css" />

        <!-- Custom Tailwind Config -->
        <script>
            tailwind.config = {
                darkMode: "class", // optional: enable class-based dark mode
                theme: {
                    extend: {
                        colors: {
                            primary: "#2563eb",
                            "primary-hover": "#1d4ed8",
                            secondary: "#64748b",
                            accent: "#0ea5e9",
                        },
                        fontFamily: {
                            sans: [
                                "Inter",
                                "Segoe UI",
                                "-apple-system",
                                "BlinkMacSystemFont",
                                "sans-serif",
                            ],
                            clash: ["Clash Display", "sans-serif"],
                        },
                        animation: {
                            "fade-in-up": "fadeInUp 0.6s ease-out",
                        },
                        keyframes: {
                            fadeInUp: {
                                from: {
                                    opacity: "0",
                                    transform: "translateY(30px)",
                                },
                                to: {
                                    opacity: "1",
                                    transform: "translateY(0)",
                                },
                            },
                        },
                    },
                },
            };
        </script>

        <!-- Fonts - Optimized loading -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Local Clash Display Font -->
        <style>
            @font-face {
                font-family: "Clash Display";
                src: url("static/fonts/ClashDisplay Semibold.otf")
                    format("opentype");
                font-weight: 600;
                font-style: normal;
                font-display: swap;
            }
        </style>

        <!-- Structured Data for Academic Papers -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "ScholarlyArticle",
                "headline": "The Curse of Coordination: Why Agents Cannot be Your Teammates Yet",
                "description": "We present CooperBench, the first benchmark designed to measure how well AI agents can cooperate when handling individual tasks with potential conflicts in software engineering.",
                "author": [
                    {
                        "@type": "Person",
                        "name": "Arpandeep Khatua",
                        "affiliation": {
                            "@type": "Organization",
                            "name": "Stanford University"
                        }
                    },
                    {
                        "@type": "Person",
                        "name": "Hao Zhu",
                        "affiliation": {
                            "@type": "Organization",
                            "name": "Stanford University"
                        }
                    },
                    {
                        "@type": "Person",
                        "name": "Peter Tran",
                        "affiliation": {
                            "@type": "Organization",
                            "name": "SAP, Inc."
                        }
                    },
                    {
                        "@type": "Person",
                        "name": "Arya Prabhudesai",
                        "affiliation": {
                            "@type": "Organization",
                            "name": "SAP, Inc."
                        }
                    },
                    {
                        "@type": "Person",
                        "name": "Diyi Yang",
                        "affiliation": {
                            "@type": "Organization",
                            "name": "Stanford University"
                        }
                    }
                ],
                "datePublished": "2025-01-15",
                "url": "https://cotomata.com/",
                "image": "https://cotomata.com/static/images/social_preview.png",
                "keywords": [
                    "multi-agent systems",
                    "AI coordination",
                    "coding agents",
                    "software engineering",
                    "merge conflicts",
                    "LLM agents"
                ],
                "abstract": "We present CooperBench, the first benchmark designed to measure how well agents can cooperate when handling individual tasks with potential conflicts. Considering software engineering as a realistic domain where humans typically need to navigate work in a team, our benchmark offers verifiable evaluation for the success of agent cooperation. CooperBench comprises 652 tasks constructed from 12 popular open-source libraries across Python, TypeScript, Go, and Rust.",
                "isAccessibleForFree": true,
                "license": "https://creativecommons.org/licenses/by/4.0/",
                "mainEntity": {
                    "@type": "WebPage",
                    "@id": "https://cotomata.com/"
                },
                "about": [
                    {
                        "@type": "Thing",
                        "name": "Multi-Agent Coordination"
                    },
                    {
                        "@type": "Thing",
                        "name": "Coding Agents"
                    }
                ]
            }
        </script>

        <!-- Website/Organization Structured Data -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Organization",
                "name": "Stanford University",
                "url": "https://stanford.edu",
                "logo": "https://cotomata.com/static/images/favicon.ico",
                "sameAs": [
                    "https://twitter.com/StanfordNLP",
                    "https://github.com/SALT-NLP/CooperBench"
                ]
            }
        </script>

        <!-- Defer non-critical JavaScript -->
        <script
            defer
            src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        ></script>
        <script
            defer
            src="https://documentcloud.adobe.com/view-sdk/main.js"
        ></script>
        <script defer src="static/js/fontawesome.all.min.js"></script>

        <!-- Markdown parsing for thinking content -->
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"
        ></script>

        <!-- Prism.js for code syntax highlighting -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
        <style>
            /* Line wrapping and smaller font for code blocks */
            pre[class*="language-"] {
                white-space: pre-wrap;
                word-wrap: break-word;
                font-size: 0.75rem;
            }
            code[class*="language-"] {
                white-space: pre-wrap;
                word-wrap: break-word;
                font-size: 0.75rem;
            }
            /* Copy button styling */
            div.code-toolbar > .toolbar {
                opacity: 1;
            }
            div.code-toolbar > .toolbar > .toolbar-item > button {
                background: #374151;
                color: #d1d5db;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
                font-size: 0.75rem;
            }
            div.code-toolbar > .toolbar > .toolbar-item > button:hover {
                background: #4b5563;
                color: #ffffff;
            }
        </style>

        <!-- Comparison functionality -->
        <script defer src="static/js/comparison.js"></script>

        <!-- Engagement features -->
        <script defer src="static/js/engagement.js"></script>
        <!-- Prism.js (syntax highlighting) -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-python.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
    </head>

    <body>
        <div id="top"></div>
        <!-- Header Navigation Bar -->
        <header
            class="fixed top-0 left-0 right-0 bg-gray-100 border-b border-gray-200 z-50"
        >
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <!-- Logo -->
                    <div class="flex-shrink-0">
                        <a
                            href="#"
                            class="text-2xl font-bold text-gray-900 hover:text-primary transition-colors duration-300 font-clash"
                        >
                            CooperBench
                        </a>
                    </div>

                    <!-- Navigation Links -->
                    <nav class="flex items-center space-x-8">
                        <a
                            href="#top"
                            class="text-sm font-semibold text-gray-700 hover:text-primary transition-colors duration-300"
                        >
                            Home
                        </a>
                        <a
                            href="#authors"
                            class="text-sm font-semibold text-gray-700 hover:text-primary transition-colors duration-300"
                        >
                            About
                        </a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Scroll to Top Button -->
        <button
            class="fixed bottom-8 right-8 w-12 h-12 bg-primary text-white rounded-full opacity-0 invisible transition-all duration-300 z-50 flex items-center justify-center text-lg shadow-lg hover:bg-primary-hover hover:-translate-y-1 hover:shadow-xl scroll-to-top"
            onclick="scrollToTop()"
            title="Scroll to top"
            aria-label="Scroll to top"
        >
            <i class="fas fa-chevron-up"></i>
        </button>

        <main id="main-content" class="pt-16 bg-gray-50 min-w-xl">
            <section class="py-20 px-6">
                <div class="max-w-3xl mx-auto">
                    <h1
                        class="text-3xl md:text-4xl font-semibold mb-8 leading-tight text-center"
                        style="color: var(--primary)"
                    >
                        The Curse of Coordination: Why Agents Cannot be Your Teammates Yet
                    </h1>

                    <div class="flex justify-center mb-12">
                        <div class="flex flex-wrap justify-center gap-3">
                            <a
                                href="#"
                                target="_blank"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fas fa-file-pdf mr-2"></i>
                                Paper
                            </a>

                            <a
                                href="https://github.com/SALT-NLP/CooperBench"
                                target="_blank"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fab fa-github mr-2"></i>
                                Code
                            </a>

                            <a
                                href="#"
                                target="_blank"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fab fa-twitter mr-2"></i>
                                Tweet
                            </a>

                            <a
                                href="https://huggingface.co/datasets/SALT-NLP/CooperBench"
                                target="_blank"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                            >
                                <i class="fas fa-database mr-2"></i>
                                Dataset
                            </a>
                        </div>
                    </div>

                    <!-- Simple stats -->
                    <div
                        class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-12 max-w-2xl mx-auto"
                    >
                        <div
                            class="text-center border rounded-lg p-4 bg-gray-100"
                        >
                            <div
                                class="text-xl text-left font-semibold text-gray-900 mb-4"
                            >
                                652 Tasks
                            </div>
                            <div class="text-sm text-left text-gray-600">
                                Real-world coding tasks from 12 popular
                                open-source libraries across Python, TypeScript,
                                Go, and Rust.
                            </div>
                        </div>
                        <div
                            class="text-center border rounded-lg p-4 bg-gray-100"
                        >
                            <div
                                class="text-xl text-left font-semibold text-gray-900 mb-4"
                            >
                                Coordination Gap
                            </div>
                            <div class="text-sm text-left text-gray-600">
                                State-of-the-art agents achieve only 25% success
                                with two-agent cooperation, ~50% lower than solo
                                baselines.
                            </div>
                        </div>
                        <div
                            class="text-center border rounded-lg p-4 bg-gray-100"
                        >
                            <div
                                class="text-xl text-left font-semibold text-gray-900 mb-4"
                            >
                                3 Research Questions
                            </div>
                            <div class="text-sm text-left text-gray-600">
                                How well can agents cooperate? What role does
                                communication play? What coordination failures
                                do agents exhibit?
                            </div>
                        </div>
                    </div>

                    <!-- Simple CTA -->
                    <div class="text-center mx-auto">
                        <div class="mb-4">
                            <a
                                href="#results"
                                class="inline-flex items-center px-6 py-3 bg-gray-800 text-white text-sm font-medium rounded hover:bg-gray-700 transition-colors"
                            >
                                <span>View Results</span>
                                <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- TL;DR Section -->
            <section class="py-16 px-6">
                <div class="max-w-3xl mx-auto rounded-lg p-8 bg-gray-100">
                    <p class="text-lg text-gray-700 leading-relaxed">
                        Can AI agents work together as teammates? We find that
                        <strong>coordinating agents perform much worse than a single agent</strong>
                        given the same total workload. This coordination deficit
                        presents a fundamental barrier to deploying AI systems
                        that can work alongside humans or other agents.
                    </p>
                </div>
            </section>
            <!-- End TL;DR Section -->

            <!-- Key Results Section -->
            <section
                id="results"
                class="py-16 px-6 bg-white scroll-mt-16"
            >
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Key Results
                    </h2>

                    <p class="text-gray-600 mb-8 leading-relaxed">
                        We evaluate state-of-the-art coding agents on CooperBench
                        and observe <strong>the curse of coordination</strong>: agents
                        perform significantly worse when cooperating than when working alone.
                    </p>

                    <!-- Main Finding -->
                    <div class="border border-red-200 rounded-lg p-6 mb-8 bg-red-50">
                        <h3 class="font-semibold text-red-900 mb-3">The Coordination Gap</h3>
                        <p class="text-red-800 leading-relaxed">
                            <strong>GPT-5</strong> and <strong>Claude Sonnet 4.5</strong> based agents achieve only 
                            <strong>~25% success rate</strong> with two-agent cooperation on CooperBench, 
                            which is around <strong>50% lower</strong> than a "Solo" baseline where 
                            one agent implements both features.
                        </p>
                    </div>

                    <!-- Research Questions -->
                    <h3 class="text-xl font-semibold text-gray-900 mb-4 mt-8">Research Questions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                        <div class="border border-gray-200 rounded-lg p-4 bg-white">
                            <div class="text-sm font-semibold text-primary mb-2">RQ1</div>
                            <p class="text-sm text-gray-600">How well can agents cooperate with each other?</p>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 bg-white">
                            <div class="text-sm font-semibold text-primary mb-2">RQ2</div>
                            <p class="text-sm text-gray-600">What role does communication play in agent-agent cooperation?</p>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 bg-white">
                            <div class="text-sm font-semibold text-primary mb-2">RQ3</div>
                            <p class="text-sm text-gray-600">What coordination failures do agents exhibit?</p>
                        </div>
                    </div>

                    <!-- Coordination Failures -->
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Key Coordination Failures</h3>
                    <div class="space-y-4 mb-8">
                        <div class="border-l-4 border-orange-400 pl-4 py-2">
                            <h4 class="font-medium text-gray-900">Communication Breakdown</h4>
                            <p class="text-sm text-gray-600">Agents send vague, ill-timed, and inaccurate messages. They fail to respond to direct questions and flood channels with repetitive status updates.</p>
                        </div>
                        <div class="border-l-4 border-orange-400 pl-4 py-2">
                            <h4 class="font-medium text-gray-900">Commitment Deviation</h4>
                            <p class="text-sm text-gray-600">Even with effective communication, agents deviate from their commitments. They make unverifiable claims about code state and ignore agreed-upon integration points.</p>
                        </div>
                        <div class="border-l-4 border-orange-400 pl-4 py-2">
                            <h4 class="font-medium text-gray-900">Incorrect Expectations</h4>
                            <p class="text-sm text-gray-600">Agents hold incorrect expectations about their partner's plans, duplicate work despite warnings, and overwrite changes they believe will merge cleanly.</p>
                        </div>
                    </div>

                    <!-- Emergent Behaviors -->
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Emergent Coordination Behaviors</h3>
                    <p class="text-gray-600 mb-4">Through large-scale simulation, we uncover successful coordination patterns:</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                            <h4 class="font-medium text-green-900 mb-2">Role Division</h4>
                            <p class="text-sm text-green-700">Agents successfully divide responsibilities based on task requirements.</p>
                        </div>
                        <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                            <h4 class="font-medium text-green-900 mb-2">Resource Division</h4>
                            <p class="text-sm text-green-700">Agents allocate shared resources without conflicts.</p>
                        </div>
                        <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                            <h4 class="font-medium text-green-900 mb-2">Negotiations</h4>
                            <p class="text-sm text-green-700">Agents resolve conflicts through back-and-forth discussion.</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- End Key Results Section -->

            <!-- Main Results Visualization -->
            <section class="py-16 px-6 bg-gray-50" id="visualization">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        The Coordination Gap
                    </h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                        Our experiments reveal a consistent pattern: agents perform significantly worse 
                        when collaborating than when working alone. The gap persists across all models 
                        and increases with task difficulty.
                    </p>
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                        <img 
                            src="static/images/main_results.png" 
                            alt="Main Results: Solo vs Collaborative success rates across models and difficulty levels"
                            class="w-full rounded-lg"
                        />
                        <p class="text-sm text-gray-500 mt-4 text-center">
                            <strong>Left:</strong> Success rates by model (Solo in blue, Collaborative in black). 
                            <strong>Right:</strong> Success rates vs relative task difficulty. The shaded area shows the coordination gap.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Agent Trajectory Viewer -->
            <section class="py-16 px-6 bg-white" id="trajectories">
                <div class="max-w-5xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Interactive Agent Trajectories
                    </h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                        Explore real agent interactions from our experiments. The timeline shows when each agent 
                        performs actions (viewing files, editing code, communicating). Click on any block to see details.
                    </p>

                    <!-- Example Selector -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Example:</label>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="loadExample('negotiation')" id="btn-negotiation" 
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-purple-100 text-purple-800 border-2 border-purple-500">
                                Negotiation
                            </button>
                            <button onclick="loadExample('delegation')" id="btn-delegation"
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200">
                                Delegation
                            </button>
                            <button onclick="loadExample('ownership')" id="btn-ownership"
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200">
                                Ownership
                            </button>
                            <button onclick="loadExample('accountability')" id="btn-accountability"
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200">
                                Accountability
                            </button>
                            <button onclick="loadExample('leadership')" id="btn-leadership"
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200">
                                Leadership
                            </button>
                            <button onclick="loadExample('backtracking')" id="btn-backtracking"
                                class="px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200">
                                Backtracking
                            </button>
                        </div>
                    </div>

                    <!-- Example Description -->
                    <div id="example-description" class="mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
                        <p class="text-sm text-purple-800">
                            <strong>Negotiation:</strong> Agents propose options and reach consensus on how to divide work. 
                            Watch as they debate different approaches and converge on a coordinated plan.
                        </p>
                    </div>

                    <!-- Timeline Legend -->
                    <div class="mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="text-xs font-medium text-gray-700 mb-2">Action Types:</div>
                        <div class="flex flex-wrap gap-4 text-xs">
                            <div class="flex items-center gap-1.5">
                                <div class="w-3 h-3 bg-orange-400 rounded"></div>
                                <span>Communication</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="w-3 h-3 bg-blue-600 rounded"></div>
                                <span>View file</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="w-3 h-3 bg-green-400 rounded"></div>
                                <span>Edit file</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="w-3 h-3 bg-yellow-400 rounded"></div>
                                <span>Bash</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="w-3 h-3 bg-red-500 rounded"></div>
                                <span>Submit</span>
                            </div>
                        </div>
                    </div>

                    <!-- Timeline Visualization -->
                    <div class="mb-6 bg-gray-900 rounded-lg p-4 overflow-x-auto">
                        <div id="timeline-container" class="min-w-full" style="min-width: 600px;">
                            <!-- Agent A Timeline -->
                            <div class="mb-4">
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="w-3 h-3 bg-red-400 rounded-full"></div>
                                    <span id="agent-a-label" class="text-sm font-medium text-red-300">Agent A</span>
                                </div>
                                <div id="timeline-a" class="relative h-8 bg-gray-800 rounded">
                                    <!-- Timeline blocks will be inserted here -->
                                </div>
                            </div>
                            <!-- Agent B Timeline -->
                            <div>
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="w-3 h-3 bg-blue-400 rounded-full"></div>
                                    <span id="agent-b-label" class="text-sm font-medium text-blue-300">Agent B</span>
                                </div>
                                <div id="timeline-b" class="relative h-8 bg-gray-800 rounded">
                                    <!-- Timeline blocks will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Messages List -->
                    <div class="bg-gray-50 rounded-lg border border-gray-200">
                        <div class="p-4 border-b border-gray-200">
                            <h3 class="font-medium text-gray-900">Communication Log</h3>
                            <p class="text-xs text-gray-500">Click timeline blocks above or scroll through messages below</p>
                        </div>
                        <div id="messages-container" class="max-h-96 overflow-y-auto p-4 space-y-3">
                            <div class="text-gray-400 text-center py-8">Loading...</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Coordination Failure Taxonomy -->
            <section class="py-16 px-6 bg-gray-50" id="taxonomy">
                <div class="max-w-5xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Coordination Failure Taxonomy
                    </h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                        Through qualitative analysis of agent interactions, we identified observable 
                        <strong>symptoms</strong> (how failures manifest) and underlying <strong>capability gaps</strong> 
                        (why failures occur).
                    </p>

                    <!-- Capability Gaps (Causes) Table -->
                    <div class="mb-10">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Capability Gaps (Causes)</h3>
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700 w-1/4">Cause</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">Definition</th>
                                        <th class="px-4 py-3 text-center font-semibold text-gray-700 w-16">%</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-blue-50 border-b border-gray-200">
                                        <td class="px-4 py-4">
                                            <div class="flex items-center gap-2">
                                                <span class="text-xl">üîç</span>
                                                <span class="font-medium text-gray-900">Expectation</span>
                                            </div>
                                        </td>
                                        <td class="px-4 py-4 text-gray-600">
                                            Cases where one agent has clearly communicated what they are doing, but the other agent still treats the situation as if that work is not being done. This reflects a failure to model the state of the other agent's code changes.
                                        </td>
                                        <td class="px-4 py-4 text-center font-semibold text-blue-700">62.9</td>
                                    </tr>
                                    <tr class="bg-purple-50 border-b border-gray-200">
                                        <td class="px-4 py-4">
                                            <div class="flex items-center gap-2">
                                                <span class="text-xl">üì£</span>
                                                <span class="font-medium text-gray-900">Communication</span>
                                            </div>
                                        </td>
                                        <td class="px-4 py-4 text-gray-600">
                                            Breakdowns in using language to coordinate. This includes failures in information sharing and decision loops, where agents do not effectively communicate their intentions, questions, or status updates.
                                        </td>
                                        <td class="px-4 py-4 text-center font-semibold text-purple-700">27.5</td>
                                    </tr>
                                    <tr class="bg-orange-50">
                                        <td class="px-4 py-4">
                                            <div class="flex items-center gap-2">
                                                <span class="text-xl">üß©</span>
                                                <span class="font-medium text-gray-900">Commitment</span>
                                            </div>
                                        </td>
                                        <td class="px-4 py-4 text-gray-600">
                                            Cases where an agent is not doing the things they promised to do. This includes failures to establish or maintain verifiable integration contracts.
                                        </td>
                                        <td class="px-4 py-4 text-center font-semibold text-orange-700">9.6</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Failure Symptoms Table -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Failure Symptoms</h3>
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700 w-1/4">Symptom</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">Meaning</th>
                                        <th class="px-4 py-3 text-center font-semibold text-gray-700 w-16">%</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Work overlap</td>
                                        <td class="px-4 py-3 text-gray-600">Both agents independently implement the same functionality, duplicating work and overwriting details.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-red-600">33.2</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Divergent architecture</td>
                                        <td class="px-4 py-3 text-gray-600">Incompatible design decisions lead to semantic loss even under a clean merge.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-red-600">29.7</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Repetition</td>
                                        <td class="px-4 py-3 text-gray-600">Verbose status messages add little new information and reduce signal.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-orange-600">14.7</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Unresponsiveness</td>
                                        <td class="px-4 py-3 text-gray-600">Direct questions or requests are not answered, breaking the decision loop.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-orange-600">8.7</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Unverifiable claims</td>
                                        <td class="px-4 py-3 text-gray-600">Agent asserts a change or interface decision without evidence the partner can check.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-yellow-600">4.3</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Broken commitment</td>
                                        <td class="px-4 py-3 text-gray-600">Confident completion claims create false shared context when the promised change is absent.</td>
                                        <td class="px-4 py-3 text-center font-semibold text-yellow-600">3.7</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Dependency access</td>
                                        <td class="px-4 py-3 text-gray-600">Missing risk communication leaves agents unable to anticipate merged dependency interactions.</td>
                                        <td class="px-4 py-3 text-center text-gray-500">1.7</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Placeholder misuse</td>
                                        <td class="px-4 py-3 text-gray-600">An explicit integration contract exists but is applied differently than agreed.</td>
                                        <td class="px-4 py-3 text-center text-gray-500">1.5</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Parameter flow</td>
                                        <td class="px-4 py-3 text-gray-600">Ambiguity about a changing interface leaves one agent implementing against an outdated contract.</td>
                                        <td class="px-4 py-3 text-center text-gray-500">1.3</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 font-medium text-gray-900">Timing dependency</td>
                                        <td class="px-4 py-3 text-gray-600">Agents agree on order but fail to communicate an enforceable plan that preserves it after merge.</td>
                                        <td class="px-4 py-3 text-center text-gray-500">1.1</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Communication Errors -->
            <section class="py-16 px-6 bg-white" id="communication">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Communication Patterns
                    </h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                        Analysis of agent conversations reveals significant differences in communication styles 
                        across models. Some agents engage in lengthy negotiations while others barely communicate.
                    </p>
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                        <img 
                            src="static/images/conversation_errors_v5_buckets.png" 
                            alt="Communication error analysis across models"
                            class="w-full rounded-lg"
                        />
                        <p class="text-sm text-gray-500 mt-4 text-center">
                            <strong>(a)</strong> Average conversation turns by model. 
                            <strong>(b)</strong> Repetition rates. 
                            <strong>(c)</strong> Unresponsiveness patterns. 
                            <strong>(d)</strong> Hallucination rates.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Emergent Behaviors Gallery -->
            <section class="py-16 px-6 bg-gray-50" id="emergent">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Emergent Coordination Behaviors
                    </h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">
                        Despite the challenges, we observe emergent coordination behaviors that sometimes lead 
                        to successful task completion. These patterns hint at how agents might develop better 
                        coordination abilities.
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Negotiation -->
                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                            <h3 class="font-medium text-gray-900 mb-2">Negotiation</h3>
                            <p class="text-sm text-gray-600 mb-3">Agents propose options and reach consensus on how to divide work.</p>
                            <img 
                                src="static/images/emergent/negotiation.png" 
                                alt="Example of agent negotiation"
                                class="w-full rounded-lg"
                            />
                        </div>

                        <!-- Delegation -->
                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                            <h3 class="font-medium text-gray-900 mb-2">Delegation</h3>
                            <p class="text-sm text-gray-600 mb-3">Agents assign specific responsibilities to avoid overlap.</p>
                            <img 
                                src="static/images/emergent/delegation.png" 
                                alt="Example of task delegation"
                                class="w-full rounded-lg"
                            />
                        </div>

                        <!-- Ownership -->
                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                            <h3 class="font-medium text-gray-900 mb-2">Ownership</h3>
                            <p class="text-sm text-gray-600 mb-3">Agents claim explicit ownership of files or code regions.</p>
                            <img 
                                src="static/images/emergent/ownership.png" 
                                alt="Example of ownership claims"
                                class="w-full rounded-lg"
                            />
                        </div>

                        <!-- Accountability -->
                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                            <h3 class="font-medium text-gray-900 mb-2">Accountability</h3>
                            <p class="text-sm text-gray-600 mb-3">Agents report back on their progress and verify completion.</p>
                            <img 
                                src="static/images/emergent/accountablity.png" 
                                alt="Example of accountability"
                                class="w-full rounded-lg"
                            />
                        </div>
                    </div>
                </div>
            </section>

            <!-- Benchmark Overview -->
            <section class="py-16 px-6" id="benchmark">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        About CooperBench
                    </h2>
                    <p class="text-gray-700 leading-relaxed mb-6">
                        CooperBench is the first benchmark designed to measure how well 
                        AI agents can cooperate when handling individual tasks with potential 
                        conflicts. We focus on software engineering as a realistic domain where 
                        humans typically need to navigate work in a team.
                    </p>

                    <!-- Benchmark Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="text-center p-4 bg-gray-100 rounded-lg">
                            <div class="text-2xl font-bold text-primary">652</div>
                            <div class="text-sm text-gray-600">Tasks</div>
                        </div>
                        <div class="text-center p-4 bg-gray-100 rounded-lg">
                            <div class="text-2xl font-bold text-primary">12</div>
                            <div class="text-sm text-gray-600">Repositories</div>
                        </div>
                        <div class="text-center p-4 bg-gray-100 rounded-lg">
                            <div class="text-2xl font-bold text-primary">4</div>
                            <div class="text-sm text-gray-600">Languages</div>
                        </div>
                        <div class="text-center p-4 bg-gray-100 rounded-lg">
                            <div class="text-2xl font-bold text-primary">8</div>
                            <div class="text-sm text-gray-600">Annotators</div>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-5 bg-white mb-6">
                        <h3 class="font-medium text-gray-900 mb-3">Supported Languages</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">Python</span>
                            <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">TypeScript</span>
                            <span class="px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm">Go</span>
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">Rust</span>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-5 bg-white">
                        <h3 class="font-medium text-gray-900 mb-3">Task Design</h3>
                        <p class="text-sm text-gray-600 mb-3">
                            Each task assigns each agent a feature to be implemented based on the same 
                            repository state. Conflicts are intentionally embedded at the code level, 
                            as the assigned features are logically compatible but require agents to 
                            modify overlapping or interdependent code.
                        </p>
                        <p class="text-sm text-gray-600">
                            Eight co-authors with real-world software engineering backgrounds created 
                            new features, unit tests, and ground-truth code for these libraries, 
                            ensuring high-quality and realistic task design.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Paper abstract -->

            <!-- End paper abstract -->

            <script>
                // Interactive Trajectory Viewer
                const exampleFiles = {
                    negotiation: 'negotiation_claude_samuelcolvin_dirty_equals_task_task43_feature7_feature8_k1.json',
                    delegation: 'delegation_claude_dottxt_ai_outlines_task_task1655_feature2_feature3_k1.json',
                    ownership: 'ownership_gpt5_dottxt_ai_outlines_task_task1371_feature2_feature3_k1.json',
                    accountability: 'accountability_gpt5_pallets_click_task_task2800_feature3_feature6_k1.json',
                    leadership: 'leadership_claude_pallets_click_task2068_feature1_feature9_k1.json',
                    backtracking: 'backtracking_gpt5_dottxt_ai_outlines_task_task1655_feature2_feature9_k1.json'
                };

                const exampleDescriptions = {
                    negotiation: '<strong>Negotiation:</strong> Agents propose options and reach consensus on how to divide work. Watch as they debate different approaches and converge on a coordinated plan.',
                    delegation: '<strong>Delegation:</strong> Agents assign specific responsibilities to avoid overlap. One agent takes ownership of certain files while the other handles different components.',
                    ownership: '<strong>Ownership:</strong> Agents explicitly claim ownership of files or code regions to prevent conflicts. They establish clear boundaries before making changes.',
                    accountability: '<strong>Accountability:</strong> Agents report back on their progress and verify completion. They check in with each other to ensure work is actually done.',
                    leadership: '<strong>Leadership:</strong> One agent takes initiative to organize the work and guide the collaboration. They propose structure and coordinate timing.',
                    backtracking: '<strong>Backtracking:</strong> Agents recognize mistakes or conflicts and adjust their approach. They course-correct when initial plans don\'t work.'
                };

                const exampleData = {};
                let currentExample = 'negotiation';

                // Get color for tool type
                function getToolColor(toolType) {
                    const colors = {
                        communication: 'bg-orange-400',
                        view: 'bg-blue-600',
                        edit: 'bg-green-400',
                        bash: 'bg-yellow-400',
                        submit: 'bg-red-500',
                        search: 'bg-sky-300'
                    };
                    return colors[toolType] || 'bg-gray-400';
                }

                async function loadExample(type) {
                    currentExample = type;
                    
                    // Update button styles
                    const buttons = ['negotiation', 'delegation', 'ownership', 'accountability', 'leadership', 'backtracking'];
                    buttons.forEach(btn => {
                        const el = document.getElementById(`btn-${btn}`);
                        if (el) {
                            if (btn === type) {
                                el.className = 'px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-purple-100 text-purple-800 border-2 border-purple-500';
                            } else {
                                el.className = 'px-3 py-1.5 text-sm rounded-lg font-medium transition-colors bg-gray-100 text-gray-700 border-2 border-transparent hover:bg-gray-200';
                            }
                        }
                    });

                    // Update description
                    document.getElementById('example-description').innerHTML = `<p class="text-sm text-purple-800">${exampleDescriptions[type]}</p>`;

                    try {
                        if (!exampleData[type]) {
                            const response = await fetch(`static/data/${exampleFiles[type]}`);
                            exampleData[type] = await response.json();
                        }
                        
                        renderTimeline(exampleData[type]);
                        renderMessages(exampleData[type]);
                    } catch (error) {
                        console.error('Error loading example:', error);
                        document.getElementById('messages-container').innerHTML = 
                            '<div class="text-red-500 text-center py-8">Error loading trajectory data.</div>';
                    }
                }

                function renderTimeline(data) {
                    // Group by agent
                    const agents = {};
                    data.forEach(step => {
                        if (!agents[step.agentId]) {
                            agents[step.agentId] = [];
                        }
                        agents[step.agentId].push(step);
                    });

                    const agentIds = Object.keys(agents).sort();
                    const agentA = agentIds[0] || 'agent_1';
                    const agentB = agentIds[1] || 'agent_2';

                    // Update labels
                    document.getElementById('agent-a-label').textContent = agentA.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
                    document.getElementById('agent-b-label').textContent = agentB.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());

                    // Calculate time range
                    const allTimes = data.map(s => s.timestampMs);
                    const minTime = Math.min(...allTimes);
                    const maxTime = Math.max(...allTimes);
                    const duration = maxTime - minTime || 1;

                    // Render timeline A
                    const timelineA = document.getElementById('timeline-a');
                    timelineA.innerHTML = '';
                    (agents[agentA] || []).forEach((step, idx) => {
                        const left = ((step.timestampMs - minTime) / duration) * 100;
                        const block = document.createElement('div');
                        block.className = `absolute top-0 h-full ${getToolColor(step.toolType)} cursor-pointer hover:brightness-110 transition-all`;
                        block.style.left = `${left}%`;
                        block.style.width = '3%';
                        block.style.minWidth = '4px';
                        block.title = `${step.toolName}${step.details ? ': ' + step.details.substring(0, 50) + '...' : ''}`;
                        block.onclick = () => scrollToMessage(step.id);
                        timelineA.appendChild(block);
                    });

                    // Render timeline B
                    const timelineB = document.getElementById('timeline-b');
                    timelineB.innerHTML = '';
                    (agents[agentB] || []).forEach((step, idx) => {
                        const left = ((step.timestampMs - minTime) / duration) * 100;
                        const block = document.createElement('div');
                        block.className = `absolute top-0 h-full ${getToolColor(step.toolType)} cursor-pointer hover:brightness-110 transition-all`;
                        block.style.left = `${left}%`;
                        block.style.width = '3%';
                        block.style.minWidth = '4px';
                        block.title = `${step.toolName}${step.details ? ': ' + step.details.substring(0, 50) + '...' : ''}`;
                        block.onclick = () => scrollToMessage(step.id);
                        timelineB.appendChild(block);
                    });
                }

                function renderMessages(data) {
                    const container = document.getElementById('messages-container');
                    container.innerHTML = '';

                    // Get unique agents for coloring
                    const agentIds = [...new Set(data.map(s => s.agentId))].sort();
                    const agentColors = {
                        [agentIds[0]]: { bg: 'bg-red-50', border: 'border-red-300', text: 'text-red-700' },
                        [agentIds[1]]: { bg: 'bg-blue-50', border: 'border-blue-300', text: 'text-blue-700' }
                    };

                    data.forEach(step => {
                        const colors = agentColors[step.agentId] || { bg: 'bg-gray-50', border: 'border-gray-300', text: 'text-gray-700' };
                        
                        const msgEl = document.createElement('div');
                        msgEl.id = `msg-${step.id}`;
                        msgEl.className = `p-3 rounded-lg border-l-4 ${colors.border} ${colors.bg} scroll-mt-24 transition-all`;

                        const agentLabel = step.agentId.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
                        const toolBadge = getToolBadge(step.toolType, step.toolName);
                        
                        let details = step.details || '';
                        // Format code in backticks
                        details = details.replace(/`([^`]+)`/g, '<code class="bg-gray-200 px-1 rounded text-xs">$1</code>');
                        details = details.replace(/\n/g, '<br>');

                        msgEl.innerHTML = `
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-semibold text-sm ${colors.text}">${agentLabel}</span>
                                    ${toolBadge}
                                </div>
                                <span class="text-xs text-gray-400">#${step.id}</span>
                            </div>
                            ${details ? `<div class="text-sm text-gray-700 leading-relaxed">${details}</div>` : ''}
                        `;

                        container.appendChild(msgEl);
                    });
                }

                function getToolBadge(toolType, toolName) {
                    const badges = {
                        communication: '<span class="px-2 py-0.5 text-xs rounded-full bg-orange-100 text-orange-700">üí¨ Message</span>',
                        view: '<span class="px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700">üëÅ View</span>',
                        edit: '<span class="px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-700">‚úèÔ∏è Edit</span>',
                        bash: '<span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700">‚ö° Bash</span>',
                        submit: '<span class="px-2 py-0.5 text-xs rounded-full bg-red-100 text-red-700">üöÄ Submit</span>',
                        search: '<span class="px-2 py-0.5 text-xs rounded-full bg-sky-100 text-sky-700">üîç Search</span>'
                    };
                    return badges[toolType] || `<span class="px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600">${toolName}</span>`;
                }

                function scrollToMessage(id) {
                    const el = document.getElementById(`msg-${id}`);
                    if (el) {
                        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        // Highlight
                        el.classList.add('ring-2', 'ring-yellow-400');
                        setTimeout(() => {
                            el.classList.remove('ring-2', 'ring-yellow-400');
                        }, 2000);
                    }
                }

                // Load default example on page load
                window.addEventListener('load', function() {
                    setTimeout(() => loadExample('negotiation'), 300);
                });
            </script>


            <!-- Getting Started -->
            <section class="py-16 px-6 bg-white" id="getting-started">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">
                        Getting Started
                    </h2>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <!-- Installation -->
                        <div
                            class="border border-gray-200 rounded-lg p-6 bg-gray-50"
                        >
                            <h3 class="font-medium text-gray-900 mb-3">
                                Installation
                            </h3>
                            <p class="text-sm text-gray-600 mb-4">
                                Clone the CooperBench repository:
                            </p>
                            <div
                                class="bg-gray-900 rounded-lg p-4 overflow-x-auto"
                            >
                                <pre class="text-green-400 text-sm"><code>git clone https://github.com/SALT-NLP/CooperBench.git
cd CooperBench
pip install -r requirements.txt</code></pre>
                            </div>
                        </div>

                        <!-- Dataset -->
                        <div
                            class="border border-gray-200 rounded-lg p-6 bg-gray-50"
                        >
                            <h3 class="font-medium text-gray-900 mb-3">
                                Download Dataset
                            </h3>
                            <p class="text-sm text-gray-600 mb-4">
                                Access the dataset from HuggingFace:
                            </p>
                            <div
                                class="bg-gray-900 rounded-lg p-4 overflow-x-auto"
                            >
                                <pre class="text-green-400 text-sm"><code>from datasets import load_dataset

dataset = load_dataset("SALT-NLP/CooperBench")</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-wrap gap-4 justify-center">
                        <a 
                            href="https://github.com/SALT-NLP/CooperBench" 
                            target="_blank"
                            class="inline-flex items-center px-6 py-3 bg-gray-800 text-white text-sm font-medium rounded hover:bg-gray-700 transition-colors"
                        >
                            <i class="fab fa-github mr-2"></i>
                            View on GitHub
                        </a>
                        <a 
                            href="https://huggingface.co/datasets/SALT-NLP/CooperBench" 
                            target="_blank"
                            class="inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                        >
                            <i class="fas fa-database mr-2"></i>
                            HuggingFace Dataset
                        </a>
                    </div>
                </div>
            </section>
            <!-- End Getting Started -->

            <!--BibTex citation -->
            <section class="py-16 px-6 bg-gray-50" id="BibTeX">
                <div class="max-w-3xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-gray-900">
                            BibTeX
                        </h2>
                        <button
                            class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:border-gray-400 hover:bg-gray-50 transition-colors"
                            onclick="copyBibTeX()"
                            title="Copy BibTeX to clipboard"
                        >
                            <i class="fas fa-copy mr-2"></i>
                            <span class="copy-text">Copy</span>
                        </button>
                    </div>
                    <pre
                        id="bibtex-code"
                        class="bg-gray-100 border border-gray-300 rounded-lg p-6 text-sm overflow-x-auto"
                    ><code class="text-gray-900 font-mono">@article{khatua2025coordination,
  title={The Curse of Coordination: Why Agents Cannot be Your Teammates Yet},
  author={Khatua, Arpandeep and Zhu, Hao and Tran, Peter and Prabhudesai, Arya and Sadrieh, Frederic and Lieberwirth, Johann K. and Yu, Xinkai and Fu, Yicheng and Ryan, Michael J. and Pei, Jiaxin and Yang, Diyi},
  journal={arXiv preprint},
  year={2025},
  url={https://cotomata.com/}
}</code></pre>
                </div>
            </section>
            <!--End BibTex citation -->

            <!-- Authors Section -->
            <section class="py-16 px-6 bg-white" id="authors">
                <div class="max-w-6xl mx-auto">
                    <h2
                        class="text-2xl font-semibold text-gray-900 mb-8 text-center"
                    >
                        Authors
                    </h2>

                    <div
                        class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6"
                    >
                        <!-- Arpandeep Khatua -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">AK</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Arpandeep Khatua<sup class="text-xs">1,*</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Hao Zhu -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="https://hao.computer/"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-muted flex items-center justify-center"
                                >
                                    <img 
                                        src="static/images/hao_zhu.png" 
                                        alt="Hao Zhu"
                                        class="w-full h-full object-cover rounded-full"
                                    />
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Hao Zhu<sup class="text-xs">1,*</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Peter Tran -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">PT</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Peter Tran<sup class="text-xs">2</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Arya Prabhudesai -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">AP</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Arya Prabhudesai<sup class="text-xs">2</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Frederic Sadrieh -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">FS</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Frederic Sadrieh<sup class="text-xs">2</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Johann K. Lieberwirth -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">JL</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Johann K. Lieberwirth<sup class="text-xs">2</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Xinkai Yu -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">XY</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Xinkai Yu<sup class="text-xs">1</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Yicheng Fu -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">YF</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Yicheng Fu<sup class="text-xs">1</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Michael J. Ryan -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">MR</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Michael J. Ryan<sup class="text-xs">1</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Jiaxin Pei -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="#"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-gray-200 flex items-center justify-center"
                                >
                                    <span class="text-2xl font-semibold text-gray-500">JP</span>
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Jiaxin Pei<sup class="text-xs">1</sup>
                                </h3>
                            </a>
                        </div>

                        <!-- Diyi Yang -->
                        <div class="flex flex-col items-center text-center">
                            <a
                                href="https://cs.stanford.edu/~diyiy/"
                                target="_blank"
                                class="group"
                            >
                                <div
                                    class="w-24 h-24 rounded-full mb-3 border-4 border-border hover:border-primary transition-colors bg-muted flex items-center justify-center"
                                >
                                    <img 
                                        src="static/images/diyi_yang.png" 
                                        alt="Diyi Yang"
                                        class="w-full h-full object-cover rounded-full"
                                    />
                                </div>
                                <h3
                                    class="font-semibold text-gray-900 group-hover:text-primary transition-colors text-sm"
                                >
                                    Diyi Yang<sup class="text-xs">1</sup>
                                </h3>
                            </a>
                        </div>
                    </div>

                    <!-- Affiliations -->
                    <div
                        class="mt-12 text-center text-sm text-gray-600 space-y-2"
                    >
                        <p>
                            <sup>1</sup>Stanford University,
                            <sup>2</sup>SAP, Inc.
                        </p>
                        <p class="text-xs italic">
                            <sup>*</sup>Equal contribution
                        </p>
                    </div>
                </div>
            </section>
            <!-- End Authors Section -->

            <footer class="bg-gray-50 border-t border-gray-200 py-12 px-6">
                <div class="max-w-7xl mx-auto">
                    <div class="flex justify-center">
                        <div class="w-full max-w-4xl">
                            <div class="text-gray-600 leading-relaxed">
                                <p>
                                    This page was built using the
                                    <a
                                        href="https://github.com/eliahuhorwitz/Academic-project-page-template"
                                        target="_blank"
                                        class="text-primary hover:text-primary-hover transition-colors duration-300"
                                        >Academic Project Page Template</a
                                    >
                                    which was adopted from the
                                    <a
                                        href="https://nerfies.github.io"
                                        target="_blank"
                                        class="text-primary hover:text-primary-hover transition-colors duration-300"
                                        >Nerfies</a
                                    >
                                    project page. You are free to borrow the
                                    source code of this website, we just ask
                                    that you link back to this page in the
                                    footer. <br />
                                    This website is licensed under a
                                    <a
                                        rel="license"
                                        href="http://creativecommons.org/licenses/by-sa/4.0/"
                                        target="_blank"
                                        class="text-primary hover:text-primary-hover transition-colors duration-300"
                                        >Creative Commons Attribution-ShareAlike
                                        4.0 International License</a
                                    >.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>

            <!-- Statcounter tracking code -->
            <!-- You can add a tracker to track page visits by creating an account at statcounter.com -->
            <!-- End of Statcounter Code -->
        </main>

        <script>
            function scrollToTop() {
                window.scrollTo({ top: 0, behavior: "smooth" });
            }

            function toggleCodeBlock(blockId) {
                const block = document.getElementById(blockId);
                const icon = document.getElementById(blockId + "-icon");

                if (block && icon) {
                    // Check if collapsed by checking if max-height is set to 0 or if class contains collapsed
                    const isCollapsed =
                        block.classList.contains("collapsed") ||
                        block.style.maxHeight === "0px";

                    if (isCollapsed) {
                        // Expand
                        block.classList.remove("collapsed");
                        block.style.maxHeight = "224px"; // h-56 = 14rem = 224px
                        block.style.overflow = "auto";
                        icon.classList.remove("fa-chevron-up");
                        icon.classList.add("fa-chevron-down");
                        icon.style.transform = "rotate(0deg)";
                    } else {
                        // Collapse
                        block.classList.add("collapsed");
                        block.style.maxHeight = "0px";
                        block.style.overflow = "hidden";
                        block.style.marginTop = "0";
                        icon.classList.remove("fa-chevron-down");
                        icon.classList.add("fa-chevron-up");
                        icon.style.transform = "rotate(180deg)";
                    }
                }
            }

            function copyBibTeX() {
                const bibtexCode =
                    document.getElementById("bibtex-code").textContent;
                navigator.clipboard.writeText(bibtexCode).then(function () {
                    const copyBtn = document.querySelector(
                        ".copy-bibtex-btn .copy-text",
                    );
                    const originalText = copyBtn.textContent;
                    copyBtn.textContent = "Copied!";
                    setTimeout(() => {
                        copyBtn.textContent = originalText;
                    }, 2000);
                });
            }

            // Show scroll to top button when scrolling
            window.addEventListener("scroll", function () {
                const scrollBtn = document.querySelector(".scroll-to-top");
                if (window.pageYOffset > 300) {
                    scrollBtn.classList.remove("opacity-0", "invisible");
                    scrollBtn.classList.add("opacity-100", "visible");
                } else {
                    scrollBtn.classList.remove("opacity-100", "visible");
                    scrollBtn.classList.add("opacity-0", "invisible");
                }
            });
        </script>
    </body>
</html>
